# Google Gemini Embeddings Integration Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฏูุฌ **Google Gemini Embeddings API** ูู ูููุน ุงูุฃุฎุจุงุฑ ูุชุญุณูู ุงูุจุญุซ ุงูุฐูู ูุงูุนุซูุฑ ุนูู ุงููุญุชูู ุงููุฑุชุจุท.

## ๐ ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. **ุงูุจุญุซ ุงูุฐูู (Semantic Search)**
- ุงูุจุญุซ ุจุงููุนูู ูููุณ ููุท ุจุงููููุงุช ุงูููุชุงุญูุฉ
- ููู ุงูุณูุงู ูุงููุฑุงุฏูุงุช
- ูุชุงุฆุฌ ุฃูุซุฑ ุฏูุฉ ูููุงุกูุฉ

### 2. **ุงูุชุฑุงุญ ุงูููุงูุงุช ุงููุดุงุจูุฉ**
- ุนุฑุถ ููุงูุงุช ุฐุงุช ุตูุฉ ุชููุงุฆูุงู
- ุฒูุงุฏุฉ ุชูุงุนู ุงููุณุชุฎุฏููู

### 3. **ุงูุชุดุงู ุงููุญุชูู ุงูููุฑุฑ**
- ุชุฌูุจ ูุดุฑ ุฃุฎุจุงุฑ ูุชุทุงุจูุฉ
- ุชุญุณูู ุฌูุฏุฉ ุงููุญุชูู

### 4. **ุชูููุฏ Embeddings ุงูุชููุงุฆู**
- ุนูุฏ ุฅูุดุงุก ุฃู ุชุญุฏูุซ ููุงู
- ุชุฎุฒูู ุขูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## โ๏ธ ุฎุทูุงุช ุงูุชุซุจูุช

### **ุงูุฎุทูุฉ 1: ุงูุญุตูู ุนูู Google Gemini API Key**

1. ุงุฐูุจ ุฅูู [Google AI Studio](https://aistudio.google.com)
2. ุงููุฑ ุนูู **"Get API Key"**
3. ุงุฎุชุฑ **"Create API key in new project"** ุฃู ุงุณุชุฎุฏู ูุดุฑูุน ููุฌูุฏ
4. ุงูุณุฎ ุงูู API Key

### **ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ API Key ุฅูู .env**

```bash
# ูู ููู .env
GEMINI_API_KEY=your_api_key_here
```

### **ุงูุฎุทูุฉ 3: ุชุดุบูู Migration**

```bash
php artisan migrate
```

ูุฐุง ุณููุดุฆ ุฌุฏูู `article_embeddings` ูุชุฎุฒูู ุงูู embeddings.

### **ุงูุฎุทูุฉ 4: ุชูููุฏ Embeddings ููููุงูุงุช ุงูููุฌูุฏุฉ**

```bash
# ุชูููุฏ embeddings ูุฌููุน ุงูููุงูุงุช ุจุฏูู embeddings
php artisan embeddings:generate

# ุชูููุฏ embeddings ูุฌููุน ุงูููุงูุงุช (ุฅุนุงุฏุฉ ุชูููุฏ)
php artisan embeddings:generate --force

# ุชูููุฏ embedding ูููุงู ูุญุฏุฏ
php artisan embeddings:generate --article-id=1
```

---

## ๐ ุงููููุงุช ุงููุถุงูุฉ

### **Models**
- `app/Models/ArticleEmbedding.php` - ูููุฐุฌ ูุชุฎุฒูู ุงูู embeddings

### **Services**
- `app/Services/EmbeddingService.php` - ุฎุฏูุฉ ุชูููุฏ ุงูู embeddings
- `app/Services/VectorSearchService.php` - ุฎุฏูุฉ ุงูุจุญุซ ุงูุฐูู

### **Controllers**
- `app/Http/Controllers/Api/SearchController.php` - ูุญุฏุซ ููุจุญุซ ุงูุฐูู

### **Commands**
- `app/Console/Commands/GenerateArticleEmbeddings.php` - ุฃูุฑ ุชูููุฏ ุงูู embeddings

### **Database**
- `database/migrations/2025_11_12_000000_create_article_embeddings_table.php`

---

## ๐ ููุงุท ุงูููุงูุฉ (API Endpoints)

### **ุงูุจุญุซ ุงูุฐูู**
```
GET /api/articles/search?q=query&page=1&per_page=12
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "status": "success",
  "data": [...],
  "total": 10,
  "current_page": 1,
  "last_page": 1,
  "per_page": 12
}
```

### **ุงูููุงูุงุช ุงููุดุงุจูุฉ**
```
GET /api/articles/{id}/similar?limit=5&threshold=0.5
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "status": "success",
  "data": [...]
}
```

### **ูุญุต ุงููุญุชูู ุงูููุฑุฑ**
```
GET /api/articles/{id}/check-duplicates?threshold=0.95
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "status": "success",
  "data": [...],
  "has_duplicates": false
}
```

---

## ๐ง ุงูุชุฎุตูุต ูุงูุฅุนุฏุงุฏุงุช

### **ุชุบููุฑ ุญุฏ ุงูุชุดุงุจู (Similarity Threshold)**

ูู `VectorSearchService.php`:
```php
// ุงูุจุญุซ ุงูุฐูู - ุงูุญุฏ ุงูุฃุฏูู ููุชุดุงุจู
$threshold = 0.3; // 0-1 (0 = ูุง ุชุดุงุจูุ 1 = ูุชุทุงุจู)

// ุงูุชุฑุงุญ ุงูููุงูุงุช - ุงูุญุฏ ุงูุฃุฏูู ููุชุดุงุจู
$threshold = 0.5;

// ุงูุชุดุงู ุงููุญุชูู ุงูููุฑุฑ - ุงูุญุฏ ุงูุฃุฏูู ููุชุดุงุจู
$threshold = 0.95;
```

### **ุชุบููุฑ ุนุฏุฏ ุงููุชุงุฆุฌ**

ูู `SearchController.php`:
```php
$limit = (int)($request->get('limit') ?? 10); // ุนุฏุฏ ุงููุชุงุฆุฌ
```

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ุฌุฏูู article_embeddings**

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|--------|
| id | BIGINT | ุงููุนุฑู ุงูุฃุณุงุณู |
| article_id | BIGINT | ูุนุฑู ุงูููุงู |
| embedding | JSON | ูุชุฌู ุงูู embedding (array ูู ุงูุฃุฑูุงู) |
| text_used | TEXT | ุงููุต ุงููุณุชุฎุฏู ูุชูููุฏ ุงูู embedding |
| task_type | VARCHAR | ููุน ุงููููุฉ (RETRIEVAL_DOCUMENT, etc.) |
| created_at | TIMESTAMP | ููุช ุงูุฅูุดุงุก |
| updated_at | TIMESTAMP | ููุช ุงูุชุญุฏูุซ |

---

## ๐จ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### **ุฎุทุฃ: "Gemini API key not configured"**
- ุชุฃูุฏ ูู ุฅุถุงูุฉ `GEMINI_API_KEY` ูู ููู `.env`
- ุชุฃูุฏ ูู ุตุญุฉ ุงูู API Key

### **ุฎุทุฃ: "Invalid response format from Gemini API"**
- ุชุญูู ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช
- ุชุญูู ูู ุญุงูุฉ Google API

### **ุฎุทุฃ: "Rate limit exceeded"**
- ุงูุทุจูุฉ ุงููุฌุงููุฉ ูุญุฏูุฏุฉ ุจู 100 ุทูุจ/ููู
- ุงุณุชุฎุฏู `--force` ุจุญุฐุฑ ุนูุฏ ุชูููุฏ embeddings ููููุงูุงุช ุงููุซูุฑุฉ

---

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช

### **ูุตุงุฆุญ ููุฃุฏุงุก ุงูุฃูุซู:**

1. **ุงุณุชุฎุฏู Batch Processing**
   - ุชูููุฏ embeddings ููููุงูุงุช ุงููุฏููุฉ ูู ุงูููู
   - ุงุณุชุฎุฏู `php artisan embeddings:generate`

2. **Cache ุงููุชุงุฆุฌ**
   - ูู ุจู cache ูุชุงุฆุฌ ุงูุจุญุซ ุงูุดููุฑุฉ
   - ุงุณุชุฎุฏู Redis ุฃู Memcached

3. **Indexing**
   - ุชุฃูุฏ ูู ูุฌูุฏ indexes ุนูู ุฌุฏูู `article_embeddings`
   - ุชู ุฅุถุงูุฉ indexes ุชููุงุฆูุงู ูู Migration

---

## ๐ ุงูุฃูุงู

### **ุฃูุถู ุงูููุงุฑุณุงุช:**

1. **ูุง ุชุดุงุฑู API Key**
   - ุงุญูุธ ุงูู API Key ูู `.env` ููุท
   - ูุง ุชุถุนู ูู ุงูู version control

2. **ุงุณุชุฎุฏู Environment Variables**
   - ุงุณุชุฎุฏู `config/services.php` ูููุตูู ููู API Key
   - ูุง ุชุณุชุฎุฏูู ูุจุงุดุฑุฉ ูู ุงูููุฏ

3. **ูุฑุงูุจุฉ ุงูุงุณุชุฎุฏุงู**
   - ุชุงุจุน ุนุฏุฏ ุงูุทูุจุงุช ููููุงู
   - ุฑุงูุจ ุงูุชูุงููู ุนูู Google Cloud Console

---

## ๐ ุงูุณุฌูุงุช ูุงูุชุชุจุน

ุฌููุน ุนูููุงุช ุชูููุฏ ุงูู embeddings ูุชู ุชุณุฌูููุง ูู:
```
storage/logs/laravel.log
```

### **ุฃูุซูุฉ ุนูู ุงูุณุฌูุงุช:**

```
[2025-11-12 20:00:00] local.INFO: Article embedding generated successfully {"article_id":1,"article_title":"ุนููุงู ุงูููุงู"}

[2025-11-12 20:00:05] local.ERROR: Failed to generate article embedding {"article_id":2,"error":"API Error"}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### **ุงุฎุชุจุงุฑ ุงูุจุญุซ ุงูุฐูู:**

```bash
# ุงูุจุญุซ ุนู "ุฃุฒูุฉ ุงูุชุตุงุฏูุฉ"
curl "http://localhost:8000/api/articles/search?q=ุฃุฒูุฉ%20ุงูุชุตุงุฏูุฉ"

# ูุฌุจ ุฃู ูุฌุฏ ููุงูุงุช ุชุญุชูู ุนูู:
# - "ุฃุฒูุฉ ุงูุชุตุงุฏูุฉ"
# - "ุฑููุฏ ูุงูู"
# - "ุงูููุงุฑ ุงูุชุตุงุฏู"
# - ุฅูุฎ
```

### **ุงุฎุชุจุงุฑ ุงูููุงูุงุช ุงููุดุงุจูุฉ:**

```bash
curl "http://localhost:8000/api/articles/1/similar?limit=5"
```

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### **ุงููุดุงูู ุงูุดุงุฆุนุฉ:**

| ุงููุดููุฉ | ุงูุญู |
|--------|------|
| ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุญุซ | ุชุฃูุฏ ูู ุชูููุฏ embeddings ููููุงูุงุช |
| ุจุทุก ุงูุจุญุซ | ููู ุนุฏุฏ ุงูููุงูุงุช ุฃู ุงุณุชุฎุฏู pagination |
| ุฎุทุฃ ูู API | ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ูุงูู API Key |

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

- [ ] ุฏุนู ุงูุจุญุซ ูุชุนุฏุฏ ุงููุบุงุช
- [ ] ุชุญุณูู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู Vector Database
- [ ] ูุงุฌูุฉ ุฅุฏุงุฑุฉ ูู embeddings
- [ ] ุชูุงุฑูุฑ ุชุญููููุฉ ุนู ุงูุจุญุซ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 12 ููููุจุฑ 2025
